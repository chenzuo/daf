CREATE TABLE [dbo].[sns_Contact] (
    [ContactType] [nvarchar](50) NOT NULL,
    [ValidationRegex] [nvarchar](50),
    CONSTRAINT [PK_dbo.sns_Contact] PRIMARY KEY ([ContactType])
)
CREATE TABLE [dbo].[sns_Org] (
    [OrgId] [nvarchar](50) NOT NULL,
    [OrgName] [nvarchar](100) NOT NULL,
    [BriefName] [nvarchar](50),
    [OrgType] [nvarchar](50),
    [Owner] [nvarchar](50),
    [Description] [nvarchar](500),
    [EstablishDate] [datetime],
    [SiteUrl] [nvarchar](200),
    [DetailUrl] [nvarchar](200),
    CONSTRAINT [PK_dbo.sns_Org] PRIMARY KEY ([OrgId])
)
CREATE TABLE [dbo].[sns_Person] (
    [PersonId] [nvarchar](50) NOT NULL,
    [PersonName] [nvarchar](50) NOT NULL,
    [Sex] [int],
    [Birthday] [datetime],
    [IDCard] [nvarchar](50),
    [Photo] [nvarchar](200),
    CONSTRAINT [PK_dbo.sns_Person] PRIMARY KEY ([PersonId])
)
CREATE TABLE [dbo].[sns_PersonContact] (
    [PersonId] [nvarchar](50) NOT NULL,
    [ContactType] [nvarchar](50) NOT NULL,
    [Detail] [nvarchar](max),
    CONSTRAINT [PK_dbo.sns_PersonContact] PRIMARY KEY ([PersonId], [ContactType])
)
CREATE INDEX [IX_PersonId] ON [dbo].[sns_PersonContact]([PersonId])
CREATE INDEX [IX_ContactType] ON [dbo].[sns_PersonContact]([ContactType])
CREATE TABLE [dbo].[sns_WorkResume] (
    [PersonId] [nvarchar](50) NOT NULL,
    [OrgId] [nvarchar](50) NOT NULL,
    [JoinDate] [datetime] NOT NULL,
    [DepartmentName] [nvarchar](50),
    [Position] [nvarchar](50),
    [Description] [nvarchar](200),
    [LeaveDate] [datetime],
    CONSTRAINT [PK_dbo.sns_WorkResume] PRIMARY KEY ([PersonId], [OrgId], [JoinDate])
)
CREATE INDEX [IX_PersonId] ON [dbo].[sns_WorkResume]([PersonId])
CREATE INDEX [IX_OrgId] ON [dbo].[sns_WorkResume]([OrgId])
CREATE TABLE [dbo].[sns_StudyResume] (
    [PersonId] [nvarchar](50) NOT NULL,
    [SchoolId] [nvarchar](50) NOT NULL,
    [JoinDate] [datetime] NOT NULL,
    [GradeName] [nvarchar](50),
    [ClassName] [nvarchar](50),
    [SubjectName] [nvarchar](50),
    [Description] [nvarchar](200),
    [LeaveDate] [datetime],
    CONSTRAINT [PK_dbo.sns_StudyResume] PRIMARY KEY ([PersonId], [SchoolId], [JoinDate])
)
CREATE INDEX [IX_PersonId] ON [dbo].[sns_StudyResume]([PersonId])
CREATE INDEX [IX_SchoolId] ON [dbo].[sns_StudyResume]([SchoolId])
CREATE TABLE [dbo].[sns_School] (
    [SchoolId] [nvarchar](50) NOT NULL,
    [SchoolName] [nvarchar](100) NOT NULL,
    [BriefName] [nvarchar](50),
    [Owner] [nvarchar](50),
    [Description] [nvarchar](500),
    [EstablishDate] [datetime],
    [SiteUrl] [nvarchar](200),
    [DetailUrl] [nvarchar](200),
    CONSTRAINT [PK_dbo.sns_School] PRIMARY KEY ([SchoolId])
)
CREATE TABLE [dbo].[sns_PersonCertificate] (
    [CertificateNo] [nvarchar](50) NOT NULL,
    [PersonId] [nvarchar](50) NOT NULL,
    [CertificateName] [nvarchar](50),
    [Level] [nvarchar](50),
    [IssueOrgName] [nvarchar](200),
    [IssueDate] [datetime],
    [ExpiredDate] [datetime],
    CONSTRAINT [PK_dbo.sns_PersonCertificate] PRIMARY KEY ([CertificateNo])
)
CREATE INDEX [IX_PersonId] ON [dbo].[sns_PersonCertificate]([PersonId])
CREATE TABLE [dbo].[sns_PersonLink] (
    [PersonId] [nvarchar](50) NOT NULL,
    [LinkPersonId] [nvarchar](50) NOT NULL,
    [LinkType] [int] NOT NULL,
    [LinkRemark] [nvarchar](50),
    CONSTRAINT [PK_dbo.sns_PersonLink] PRIMARY KEY ([PersonId], [LinkPersonId])
)
CREATE INDEX [IX_PersonId] ON [dbo].[sns_PersonLink]([PersonId])
CREATE INDEX [IX_LinkPersonId] ON [dbo].[sns_PersonLink]([LinkPersonId])
ALTER TABLE [dbo].[sns_PersonContact] ADD CONSTRAINT [FK_dbo.sns_PersonContact_dbo.sns_Person_PersonId] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[sns_Person] ([PersonId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_PersonContact] ADD CONSTRAINT [FK_dbo.sns_PersonContact_dbo.sns_Contact_ContactType] FOREIGN KEY ([ContactType]) REFERENCES [dbo].[sns_Contact] ([ContactType]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_WorkResume] ADD CONSTRAINT [FK_dbo.sns_WorkResume_dbo.sns_Person_PersonId] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[sns_Person] ([PersonId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_WorkResume] ADD CONSTRAINT [FK_dbo.sns_WorkResume_dbo.sns_Org_OrgId] FOREIGN KEY ([OrgId]) REFERENCES [dbo].[sns_Org] ([OrgId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_StudyResume] ADD CONSTRAINT [FK_dbo.sns_StudyResume_dbo.sns_Person_PersonId] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[sns_Person] ([PersonId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_StudyResume] ADD CONSTRAINT [FK_dbo.sns_StudyResume_dbo.sns_School_SchoolId] FOREIGN KEY ([SchoolId]) REFERENCES [dbo].[sns_School] ([SchoolId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_PersonCertificate] ADD CONSTRAINT [FK_dbo.sns_PersonCertificate_dbo.sns_Person_PersonId] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[sns_Person] ([PersonId]) ON DELETE CASCADE
ALTER TABLE [dbo].[sns_PersonLink] ADD CONSTRAINT [FK_dbo.sns_PersonLink_dbo.sns_Person_PersonId] FOREIGN KEY ([PersonId]) REFERENCES [dbo].[sns_Person] ([PersonId])
ALTER TABLE [dbo].[sns_PersonLink] ADD CONSTRAINT [FK_dbo.sns_PersonLink_dbo.sns_Person_LinkPersonId] FOREIGN KEY ([LinkPersonId]) REFERENCES [dbo].[sns_Person] ([PersonId])
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201211150736224_Init', 0x1F8B0800000000000400ED5D5B73DBB8157EEF4CFF83464F6D6756B29D6C9BCDC8BB635B76EA36B23356927DCCC0222CB1E1454B42AEFDDBFAD09FD4BF50F08E3B01121429AF5F120B9783838383439C73C08FFFFBCF7F67BF3CF9DEE81146B11B06A7E3E3C9D178048355E8B8C1FA74BC430F3FBC1BFFF2F31FFF30BB74FCA7D1D7A2DD9BA41DEE19C4A7E30D42DBF7D369BCDA401FC413DF5D45611C3EA0C92AF4A7C009A72747473F4D8F8FA7109318635AA3D1EC6E1720D787E90FFCF3220C56708B76C05B840EF4E2BC1CD72C53AAA31BE0C3780B56F0743C3FBB9A2CC3950BBC49D678323F9F5C5E8D47679E0B303B4BE83D8C47DBB7EFBFC47089A230582FB700E1E69F9FB710D73F002F8639F3EFB76F75F93F3A49F89F822008112617068DE63F2E6786E7768965809E13B6D2F99D8EB118105821B2116EF64FF84C15E0A24F51B885117ABE830F74D784D87834A5094C590A657F51E7E45F2C4514610D188FAEDC27E87C84C11A6D4AD12DC05351F22356832F818BF505F741D10ED7DEEC3C0FDC7BB06C3E558EFD1578AE930AF40EAEE193CDF1B3DFE4F0B3692573E54ADC46EB26AB80BB5D3BE6F2CFBBED59F278D4E40FC3718F8F5A0F7C1EB9F0A1C1D0868B2D9CB16D1DD71AF6DF018CF63DE81CC6ABC8DD6696CA70E8B6635FC6083776E3CD1CA052DAC9DF9F5DDF98D8D245F04BE4194EE2A4F524E61001D7EB7E646D9BF4093F7CF16236304B59CF2696A9EAB967E3940D6CDB48680DBD249E42F82C31497F9BE9CEB91BA18D039EDBEAFEF5FC02445685AF33EAA74D88C2EEF7DB0D7874D7E9935F7C1C89C7A33BE8A50DE28DBBCD5723538CBCC9B77C4F8CAEA2D0BF0BBD5271E8FA6F9F41B486084F2954345A86BB6865C0E6AF61F4FD0EC6BB6459058C56D5022EB94A8E45BE85297F4BB4739E150C12F5020EF95A8E454113531E2FF0DFEE83BBC2FB43B9DC5533F992736D64CBCE3714B16D68975B9CDD65E6D9FE41BF3773DEA787913DC80D87C57F5AB36785C6DAB26685B62AAD59A1FB86465783CBB2A58CCDE27F359FC5FF2246B5F71E6183BBDE7842DF4ED8F21FA11B6427DF83D99FFD78A095A0E4C724CD2DBE0511F26180FA702B3F85B1DBC8CFEACDC56BEF1D7D84E0113672EF9A9849C3B3146B78E4A72D5DDE9278500D6369132157B846C55252DDCA089207BDAEADE072B50943EFE51AC26A7E876A0B3F44C0817D98C10B0FC4711F032F77F7FF82AB5E4CFFEFC7041B7B8BACC5533894DA1E6DBA396BD92B9A89D9CB6A95ECE54DDA19E58C8906F6586662EBAD666FC62B1BF8F7964D780DEB9B189DD7B0BED8507041A946E9DFAAFB4DD820014C77EF25D6DF47548A98760F06E4237C84A66AD87AD0EB38DEC166A9DFF69B2F1DDC86F5B87CDABA1174F676FA69158696C4C1E4F1EA1676E4A31B7CEFDC094C0639C09C22CD760F8353E1EF4AADAAAA0634EFA00FA2EF9D5B11E9A65940C5864918FC96B46077495E21D91A45ADA97F502D701D4F644B216F5503158F442BB3BDBBF349572149305FC7571E5857F7D3BE040E8CBC67BC9AD9CA5E07E8CD09B3B317D0BF87514EE50A2B82873B7E05DE0EFF3CE2C446B55E906D8F79B63306154CB3AADB9AFF0F11089C2B8036C9A15ACC98B0CB220CA83E27EA3ECC086F6AC41452ADDFAA5BFF7D17DF638ECAE63FAA9BFFEA3E546BF05775DB65A2A979D3BFA99BCEC16EBD4104D7EF34A448D2FF49A33D37C8718DC29D47B4288F6BD676E9C614F99A65BD0877B15B4DE1B8665DBF042B52FF6B16EA2C4055DB9A854AA3608BF45C5228648D6412E7D9F3E82E5A3BF22C8E937BB0899513A5A28B230A3DF465E08C74728BEC43AACCFA2D761E72B79EBBC286ED74FC176E6E3503943979760096F231CD38A67C1BCCA107111C9DAD507A0BF902C42BE008C2CB9807BA049F5D600483E41A30E62746117003C41F74DC60E56E81A7C13FD3D7F44C352DC7626BE6700BB1E90C90C62AB565A21C8B115F9DB4665342F54C34527C4942A6315C1ED9BA4EB23968620409EDA1692533031D8D50DC2069A199CC625960640FDAC9E715657AA34832563A43DE08D35749C55DB0E1DB4829F37B3390D2953900EBC8A48F353484CA255BD43C32094DD04D93DA03D639826D9DE596DDE169A46DC452B41A7B0F7A2648DEC9744295C923EE4493774BF5154E75A974F8B64ECEFDDE8C9D7C750EC0DA0972B43A8AC2266CAD6A2193EA2589E759E4216B21CDBD8E0A28EEEF34D3427A75DAB2B03F8F840FE5D7B80C8AB83EE79710C93C73DF44718F7DF836B26E0EFBF69BA5AB7600F6928EA1ABB5860BA88B920CE6CAC846E20F460319C6F7AC76CC6A1C96AE11B9110DE510254A2CEA9E20C372583AC84FA00F5DE45749870B559EB713BDCCD265695CC80D88DC4782F6303FE7D43169BC84887B6DB0CABAB1C13C4EE56812D84713754FBDE09AAE9F60B84D520A5CE742476BFB13D13411134CC8B3865CE5A78A6891E1821A42C4594F44893A82D7914A0F7E422AF9595B4F46D43B8332399147302DB289B2CBE965268C214468B16421CB6B224453D5AB5FEC16D3CCD69433E2F588DBB59AF9198A64A6DAACADA4A76F2C9A5295EB6423CC1A18E40D6C4887CD14103465D41A0848F09E0B2F9C9AA0B566D89A9800652B14129107AABB5016F6D51AA520B8E8A94EFCB49D08C8882941297B84B49EBDE8BA3D2F81BAB89E6E648FE09FB6F70A512862795DA883E882BF5A20A210936E90A9AD4098B01249AE7808DAB2A6823B8952835A13F4300B7BF066957A30D79B5679A0A3BB874F79234D2623A1BBADE17073D2C8CF13B562605DEC8EE74EDE7C53CA40E6061A3882ED642270FDDAC8A6B88C577A1765DD6C9AA1CCE505B3A9048E6EB600DBAD1BAC0978BABC64B4CCB0E92E7E589AC3C2F9198DE92A16A0C395DC9623A130026BC8D426A710075EB9518CE600817B905CC1BB707CAE599D2F550CC3B854FC8215A7E4A243F2777EFF4C0CD037911CE32A295EE18925EF70A77384FC098BEF394A000281072215DCC445E8EDFC40E3CA819C1E075247D2E42A79BAB3293345CE95E604CAC525E805D25ABEF42C6263E904C72B8D6513F69289384F8F928295644C9534B2D71A182A59A13E1DE295329212516CC413AF8665A1019DEC6D338A4A56A44F837A798CA44455E8D3635E0823293255FA34CBF7C2486A65A1C95CCBF7BCE89996C583D9A6F9A3CCC646153FB035F6AAACA34CBC55589094AE3C58584789DF6D64B981FAB0D67929B6C8D2AD5F22B7513BBF2CD5A75460B791748A3203E964586C9460B2A201A92F1553B1A7C6CD0F0C35FDBB576ADB079002C38A3765035204328862430B64E04E5A2AA0EADCFDFADB38CD548820241919A68A5A7B6878245A8BE83A03D354C21E51D22A4BFB3B9710C8182435A278307B868A2ED9D8345230A09462DDAE51F6EE7EDB545783A847B8F4C2909C92BDCD43E0E990A4886283C7420591433D14AA62035991A83794B8C88AD74DA8B309F398AC95FD278C3AEB6C3D49C7EEF70A89DEC2D3EAD5797E757A5FAED3CBA50C2C7A0E32349594AEA6F7A0A22135F034900A65E455102D2A9A16BD1216EF44C69FE136CD814C68339F1619B8CB142E09E53453358614F94D4A141B6C7A126F84DAF264C5C03657966DB1B7AB786C9194A0DE761277EE5EE7E93B6C948A2A6FB7A929F28E7D556A46A9C0EF606915E57BD6292E4BC63629472FB3654C566C9667A8EABFE4C4A5ACB226E31116D3A3EBA4E9AAE718417F9234982C7FF32E3C1726EFE2170D1620701F608C3E87DF61900214BD63BE03D5E01B4DD338763C412A8E00BF18D0879A824710AD3620E2F05DEC7C874983FC617E66C996DC18282D21D914E5B02DAC61A39510F26BA83EC6588896680AA00E25948D490B910CB1F643D41EC950C8E389398F1C506133C207F579215B9B92CC1DD9A54C7C1CC84D9E44EDBE0BD454E5E8EF0259DA6FD4677FF6A26C07F9CD145B9AD4E1B39CFEE24941F54F3E78FAB3A5F57BE1DFDDB07838B04F94458A171991165FCDB0654D988F62ECF950D0E081CBE1A9EB59E7D7CF34D8577116C87C705B87FBC88225F5E6BEA16089AEE01309AF1B720810FD7677CC6179A2AF3EE3CBF01907885D6FD791ECE0F0CF265BACEE020A58DE124D116EBC2DB5E560E19B6E2B012CBCE567862C99317894755B9A2B0251B7499BF48799084B434C74AB216C2B98BBFBC6B090BCD4DC0651B5052C464FD8B98783C2A28B962B5AC67DC0D60E459D4C16B613D0DB178772DBB7792271492470252FC230296FB60FCE2A69A2D4A6280DC4AA758D1DDBBFDA885F8BD40F6177A630078235DBB7B9A1C08B64A0462FC2E0A8DF0A189CC531418ACDB1400468522F5C87A437CD8DD201DDE9D061E2BCF6EE9B11C1B496C8B20761996A42880D861E18326BDF0A9521D7713CE861721E900A496E270F5977B491565F7568603A341064541EF4875D472144AA0A2135BB837D3A76EE93644A161E8D83B8426B9CAA8748BD3E8E7C5A2A23AD07AF9A293D47B9A890112FEAB5E8CBE5C3D4AB47330769ADC168950DD70CC7B50EC655369A39D6AB02EA553A484328583D24D89A75834D40636B3063D5430E04575680D526306BD2C0AF147A837BD40C073356C4BC84ED9EA66E1D0DB6D95AF3568A05D8B03AD5B660AFC403A84421EB7B7A1DA0B9365B4BC15380C37DB03B5D5B58ADD4F3847C61BEFFE94A230D3681581B5A68FE012979C5D99618AC01AC369B30F94066DF3EB53AC52E7054FB9CB2013C2AFF8227766C764172CB26FB3587B1BBAE48CC30CD00AE2897A66C731D3C84857FC5705434616E782C20020EF677CE12E5C54F5A5CBD82719C7EF73EFF7EF2A57F0F9DEBE07687B63B84A70CFD7B8F026F4B3C34D5F829062CCDF3EC36BD5618DB9842FEB225BC0DCE77AE577D30FC8ABFE1222391B87E1F202ECFD6127B9208AE9F4B4A3761A04928175FE9B17E86FED64BF0186E8325788472DEEA65484B6C3677C13A027E9CD3A8FAE39F58FD1CFFE9E7FF03BFC293CC92A60000, '5.0.0.net45')
